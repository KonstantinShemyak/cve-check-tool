AC_INIT([cve-check-tool], 1, [michael.i.doherty@intel.com], [cve-check-tool], [https://github.com/ikeydoherty/cve-check-tool])
AM_INIT_AUTOMAKE([-Wno-portability no-dist-gzip dist-xz foreign subdir-objects])
AC_PROG_CC
AC_PROG_CC_STDC
LT_PREREQ(2.2)
AC_CONFIG_HEADERS([config.h])
AC_PREFIX_DEFAULT(/usr/local)
AM_SILENT_RULES([yes])
LT_INIT([disable-static])

# Package requirements
PKG_CHECK_MODULES([GLIB], [glib-2.0 >= 2.36.0])
PKG_CHECK_MODULES([GIO], [gio-2.0 >= 2.36.0])
PKG_CHECK_MODULES([LIBXML2], [libxml-2.0 >= 2.9.1])
PKG_CHECK_MODULES([LIBCURL], [libcurl >= 7.29.0])

# Jira plugin
PKG_CHECK_MODULES([LIBJSON_GLIB], [json-glib-1.0 >= 0.16.0])
PKG_CHECK_MODULES([LIBGOBJECT], [gobject-2.0 >= 2.0.0])

# Unit tests
PKG_CHECK_MODULES([CHECK], [check >= 0.9])

AC_CONFIG_MACRO_DIR([m4])


AC_CONFIG_FILES([Makefile
                 data/Makefile
                 docs/Makefile
                 tests/Makefile
                 src/Makefile])

AC_OUTPUT

AC_MSG_RESULT([
        cve-check-tool $VERSION
        ========

        prefix:                 ${prefix}
        libdir:                 ${libdir}
        sysconfdir:             ${sysconfdir}
        exec_prefix:            ${exec_prefix}
        bindir:                 ${bindir}
        datarootdir:            ${datarootdir}

        compiler:               ${CC}
        cflags:                 ${CFLAGS}
        ldflags:                ${LDFLAGS}
])
