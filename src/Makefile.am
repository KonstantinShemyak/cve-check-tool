include $(top_srcdir)/common.mk

if COVERAGE
AM_CFLAGS += --coverage
endif

SUBDIRS = . \
	plugins

bin_PROGRAMS = \
	cve-check-tool \
	cve-check-update

noinst_LTLIBRARIES = \
	libcve.la

libcve_la_SOURCES = \
	library/common.h \
	library/cve-check-tool.h \
	library/cve-string.h \
	library/cve-string.c \
	library/hashmap.h \
	library/hashmap.c \
	library/fetch.c \
	library/fetch.h \
	library/template.c \
	library/template.h \
	library/util.c \
	library/util.h \
	plugins/packaging/faux/faux.h \
	core.h \
	core.c

libcve_la_CFLAGS = \
	$(CVE_CHECK_TOOL_CFLAGS) \
	$(AM_CFLAGS)

libcve_la_LIBADD = \
	$(CVE_CHECK_TOOL_LIBS) 

cve_check_tool_SOURCES = \
	main.c \
	update.h \
	update.c \
	plugin-manager.c \
	plugin-manager.h \
	plugin.h \
	plugins/jira/jira.c \
	plugins/jira/jira.h


cve_check_tool_CFLAGS = \
	$(CVE_CHECK_TOOL_CFLAGS) \
	$(AM_CFLAGS)


cve_check_tool_LDADD = \
	$(CVE_CHECK_TOOL_LIBS) \
	libcve.la \
	-ldl

cve_check_update_SOURCES = \
	update.c \
	update.h \
	update-main.c


cve_check_update_CFLAGS = \
	$(CVE_CHECK_TOOL_CFLAGS) \
	$(AM_CFLAGS)


cve_check_update_LDADD = \
	$(CVE_CHECK_TOOL_LIBS) \
	libcve.la \
	-ldl
